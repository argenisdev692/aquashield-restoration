<?php

declare(strict_types=1);

namespace Src\Contexts\Users\Infrastructure\Persistence\Mappers;

use Src\Contexts\Users\Domain\Entities\User;
use Src\Contexts\Users\Domain\Enums\UserStatus;
use Src\Contexts\Users\Domain\ValueObjects\UserId;
use Src\Contexts\Users\Infrastructure\Persistence\Eloquent\Models\UserEloquentModel;

/**
 * UserMapper â€” Translates between Eloquent model and Domain entity.
 */
final class UserMapper
{
    public static function toDomain(UserEloquentModel $model): User
    {
        $status = $model->trashed()
            ? UserStatus::Deleted
            : UserStatus::Active;

        return new User(
            id: new UserId($model->id),
            uuid: $model->uuid,
            name: $model->name,
            lastName: $model->last_name,
            email: $model->email,
            username: $model->username,
            phone: $model->phone,
            profilePhotoPath: $model->profile_photo_path,
            address: $model->address,
            city: $model->city,
            state: $model->state,
            country: $model->country,
            zipCode: $model->zip_code,
            status: $status,
            createdAt: $model->created_at?->toIso8601String(),
            updatedAt: $model->updated_at?->toIso8601String(),
        );
    }
}
